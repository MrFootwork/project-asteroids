var K=r=>{throw TypeError(r)};var U=(r,e,t)=>e.has(r)||K("Cannot "+t);var g=(r,e,t)=>(U(r,e,"read from private field"),t?t.call(r):e.get(r)),f=(r,e,t)=>e.has(r)?K("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);var o=(r,e,t)=>(U(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var h,F,Q,q,Z,C,ee,te;class Me{constructor({spaceshipElement:e,gameScreen:t,keys:i,state:s}){f(this,h);this.gameScreen=t,this.element=e,this.keys=i,this.isAccelerating=!1,this.isDecelerating=!1,this.state=s,this.ANGLE_OFFSET=Math.PI/2,this.SPEED=8,this.ROTATIONAL_SPEED=.2,this.position={x:0,y:0},this.velocity={x:0,y:0},this.rotaionalVelocity=0,this.orientation=0,this.thrustOrientation=0,this.dimension={width:e.clientWidth,height:e.clientHeight},this.hasHitTheEdge=!1}update(){o(this,h,ee).call(this),o(this,h,Q).call(this),o(this,h,q).call(this),o(this,h,Z).call(this),o(this,h,te).call(this),o(this,h,C).call(this),o(this,h,F).call(this)}deflectFromObstacle(){this.hasHitTheEdge&&(this.velocity.x=-this.velocity.x,this.velocity.y=-this.velocity.y,this.hasHitTheEdge=!1),o(this,h,q).call(this);const e=.9;this.velocity.x*=e,this.velocity.y*=e,o(this,h,C).call(this),o(this,h,F).call(this)}getCurrentVelocity(){return{x:Math.cos(this.orientation-this.ANGLE_OFFSET),y:Math.sin(this.orientation-this.ANGLE_OFFSET)}}getCollisionShape(){return{x:this.position.x+this.element.clientWidth/2,y:this.position.y+this.element.clientHeight/2,radius:this.element.clientWidth/2}}setPosition(e){if(!e){this.position.x=(gameScreen.clientWidth-this.element.clientWidth||70)/2,this.position.y=(gameScreen.clientHeight-this.element.clientHeight||70)/2;return}this.position.x=e.x,this.position.y=e.y}setVelocity(e){if(!e){this.velocity.x=0,this.velocity.y=0;return}this.velocity.x=e.x,this.velocity.y=e.y}}h=new WeakSet,F=function(){this.element.style.left=`${this.position.x}px`,this.element.style.top=`${this.position.y}px`,this.element.style.transform=`rotate(${this.orientation}rad)`},Q=function(){this.isAccelerating=this.keys.arrowUp.pressed,this.isDecelerating=this.keys.arrowDown.pressed},q=function(){let e=0;this.keys.arrowLeft.pressed&&(e=-1),this.keys.arrowRight.pressed&&(e=1);const t=.03;this.rotaionalVelocity+=e*t;const i=.8;this.rotaionalVelocity*=i;const s=this.ROTATIONAL_SPEED;this.rotaionalVelocity>s&&(this.rotaionalVelocity=s),this.rotaionalVelocity<-s&&(this.rotaionalVelocity=-s),this.orientation+=this.rotaionalVelocity},Z=function(){let e=0;this.isAccelerating&&(e=.2);const t=e*Math.cos(this.orientation-this.ANGLE_OFFSET),i=e*Math.sin(this.orientation-this.ANGLE_OFFSET);this.velocity.x+=t,this.velocity.y+=i;const s=.99;this.velocity.x*=s,this.velocity.y*=s,this.isDecelerating&&(this.velocity.x*=.94,this.velocity.y*=.94);const a=Math.sqrt(this.velocity.x**2+this.velocity.y**2),l=this.SPEED;a>l&&(this.velocity.x=this.velocity.x/a*l,this.velocity.y=this.velocity.y/a*l)},C=function(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y},ee=function(){this.dimension.width||(this.dimension.width=this.element.clientWidth,this.dimension.height=this.element.clientHeight)},te=function(){const e=this.position.x<0||this.position.x+this.dimension.width>this.gameScreen.clientWidth||this.position.y<0||this.position.y+this.dimension.height>this.gameScreen.clientHeight;this.hasHitTheEdge=e};var v,se,ie,oe;class De{constructor({gameScreen:e,spaceshipElement:t,position:i,velocity:s,projectileElement:a,orientation:l}){f(this,v);this.gameScreen=e,this.spaceshipElement=t,this.element=a,this.width=20,this.position=i,this.velocity=s,this.orientation=l,this.hasBeenRenderedOnce=!1,this.isOutside=!1,this.hasHitTarget=!1}update(){o(this,v,ie).call(this),o(this,v,oe).call(this),o(this,v,se).call(this)}getCollisionShape(){return{x:this.position.x+this.width/2+20,y:this.position.y+this.width/2+20,radius:this.width/2}}}v=new WeakSet,se=function(){this.element.style.left=`${this.position.x}px`,this.element.style.top=`${this.position.y}px`,this.hasBeenRenderedOnce||(this.element.style.width=`${this.width}px`,this.element.style.transform=`
        translateX(${(this.spaceshipElement.clientWidth-this.width)/2}px)
        translateY(${(this.spaceshipElement.clientHeight-this.width)/2}px)
        rotate(${this.orientation}rad)
        translateY(-${(this.spaceshipElement.clientHeight-this.width+30)/2}px)
      `,this.hasBeenRenderedOnce=!0)},ie=function(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y},oe=function(){const e=this.gameScreen.getBoundingClientRect(),t=this.element.getBoundingClientRect(),i=t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom;this.isOutside=i};var m,ne,re,ae,le,he;class Re{constructor({position:e,velocity:t,width:i,element:s,gameScreen:a}){f(this,m);this.gameScreen=a,this.element=s,this.position=e,this.velocity=t,this.width=i,this.ROTATIONAL_SPEED=-.04+Math.random()*.08,this.orientation=0,this.isOutside=!1,this.hasCollided=!1,this.isShot=!1,this.hasEnteredScreen=!1,this.hasBeenRenderedOnce=!1}update(){o(this,m,re).call(this),o(this,m,ae).call(this),this.hasEnteredScreen&&o(this,m,he).call(this),this.hasEnteredScreen||o(this,m,le).call(this),o(this,m,ne).call(this)}getCollisionShape(){return{x:this.position.x+this.width/2,y:this.position.y+this.width/2,radius:this.width/2}}}m=new WeakSet,ne=function(){this.element.style.left=`${this.position.x}px`,this.element.style.top=`${this.position.y}px`,this.element.style.transform=`rotate(${this.orientation}rad)`,this.hasBeenRenderedOnce||(this.element.style.width=`${this.width}px`,this.hasBeenRenderedOnce=!0)},re=function(){this.orientation+=this.ROTATIONAL_SPEED},ae=function(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y},le=function(){const e=this.position.x+this.width>=20&&this.position.x<=this.gameScreen.clientWidth-20&&this.position.y+this.width>=20&&this.position.y<=this.gameScreen.clientHeight-20;this.hasEnteredScreen=e},he=function(){const e=this.position.x+this.width<20||this.position.x>this.gameScreen.clientWidth-20||this.position.y+this.width<20||this.position.y>this.gameScreen.clientHeight-20;this.isOutside=e};const I={1:{initialAsteroids:3,spawnRate:5e3,speedMultiplier:1,startPosition:null,asteroidSpeed:1.5},2:{initialAsteroids:5,spawnRate:4e3,speedMultiplier:1.2,startPosition:null,asteroidSpeed:2},3:{initialAsteroids:7,spawnRate:3e3,speedMultiplier:1.5,startPosition:null,asteroidSpeed:2.5},4:{initialAsteroids:9,spawnRate:2500,speedMultiplier:1.5,startPosition:null,asteroidSpeed:2.5},5:{initialAsteroids:11,spawnRate:2e3,speedMultiplier:1.2,startPosition:null,asteroidSpeed:2.5}},He="mrfootwork.github.io",Fe="project-asteroids";function P(){return window.location.hostname===He?`/${Fe}/`:""}const O=60,qe=Math.round(1e3/O),Y=110;var w,b,M,A,n,B,W,ce,de,ue,V,pe,me,$,ye,ge,G,_,j,fe;class Ce{constructor({gameScreen:e,state:t}){f(this,n);f(this,w,new Audio("assets/sounds/rocket-thrust.wav"));f(this,b,new Audio("assets/sounds/rock-break.mp3"));f(this,M,new Audio("assets/sounds/metal-clang.mp3"));f(this,A,new Audio("assets/sounds/hit-against-wall.mp3"));this.keys={arrowUp:{pressed:!1},arrowDown:{pressed:!1},arrowLeft:{pressed:!1},arrowRight:{pressed:!1},space:{pressed:!1}},this.gameScreen=e,this.state=t,this.currentFrame=0,this.gameloopIntervalID=null,this.wasEnded=!1,this.currentLevelID=1,this.currentLevel=I[this.currentLevelID],this.remainingTime=Y,this.spaceship=new Me({spaceshipElement:o(this,n,fe).call(this),gameScreen:e,keys:this.keys,state:t}),this.player={lives:3,score:0,hasWon:!1},this.frameAtObstacleHit=null,this.HIT_OBSTACLE_DURATION=40,this.projectiles=[],this.fireRate=O/2,this.lastFired=null,this.asteroids=[],this.baseAsteroidSpeed=1.5}start(){requestAnimationFrame(()=>{timeDisplay.textContent=this.getFormattedRemainingTime(),o(this,n,_).call(this),o(this,n,j).call(this),o(this,n,G).call(this)}),this.screenSize={width:this.gameScreen.clientWidth,height:this.gameScreen.clientHeight},this.currentLevel=I[this.currentLevelID],o(this,n,me).call(this,this.currentLevel.initialAsteroids),requestAnimationFrame(()=>o(this,n,B).call(this)),console.warn("game at start: ",this)}reset(){clearInterval(this.gameloopIntervalID),this.gameloopIntervalID=null,this.currentFrame=0,this.remainingTime=Y,this.player.hasWon||(this.currentLevelID=1),this.player.hasWon&&I[this.currentLevelID+1]&&++this.currentLevelID,this.currentLevel=I[this.currentLevelID],[this.asteroids,this.projectiles].forEach((e,t)=>{const i=[".asteroid",".projectile"];for(let a=e.length-1;a>=0;a--)e[a].element.remove(),e.splice(a,1);const s=document.querySelectorAll(i[t]);for(const a of s)a.remove()}),this.wasEnded=!1,this.player.lives=3,this.player.score=0,this.player.hasWon=!1,this.spaceship.setPosition(this.currentLevel.startPosition),this.spaceship.setVelocity(),this.spaceship.orientation=0,this.spaceship.update(),this.fireRate=Math.round(1e3/12),this.lastFired=null,this.baseAsteroidSpeed=this.currentLevel.asteroidSpeed}resizeScreen(){this.screenSize={width:this.gameScreen.clientWidth,height:this.gameScreen.clientHeight}}getFormattedRemainingTime(){const e=Math.floor(this.remainingTime/60),t=(this.remainingTime%60).toString().padStart(2,"0");return`${e}:${t}`}onKeyDown(e){switch(e.code){case"ArrowUp":case"KeyW":this.keys.arrowUp.pressed=!0,this.state.sfxOn&&(g(this,w).volume=.2,g(this,w).play());break;case"ArrowDown":case"KeyS":this.keys.arrowDown.pressed=!0;break;case"ArrowLeft":case"KeyA":this.keys.arrowLeft.pressed=!0;break;case"ArrowRight":case"KeyD":this.keys.arrowRight.pressed=!0;break;case"Space":this.keys.space.pressed=!0;break}}onKeyUp(e,t){switch(e.code){case"ArrowUp":case"KeyW":this.keys.arrowUp.pressed=!1,g(this,w).pause(),g(this,w).currentTime=0;break;case"ArrowDown":case"KeyS":this.keys.arrowDown.pressed=!1;break;case"ArrowLeft":case"KeyA":this.keys.arrowLeft.pressed=!1;break;case"ArrowRight":case"KeyD":this.keys.arrowRight.pressed=!1;break;case"Space":this.keys.space.pressed=!1;break;case"KeyP":case"Pause":this.toggleMusicVolume(t),this.pauseOrResumeGame();break}}pauseOrResumeGame(){const e=!this.gameloopIntervalID;if(!e){o(this,n,V).call(this);return}if(e){o(this,n,B).call(this);return}}toggleMusicVolume(e){this.state.musicLow||(e.volume-=.2),this.state.musicLow&&(e.volume+=.2),this.state.musicLow=!this.state.musicLow}}w=new WeakMap,b=new WeakMap,M=new WeakMap,A=new WeakMap,n=new WeakSet,B=function(){this.gameloopIntervalID=setInterval(()=>{if(this.currentFrame++,o(this,n,G).call(this),this.wasEnded){o(this,n,V).call(this),!this.currentFrame%60&&console.log("game at end: ",this.currentFrame,this),this.player.lives===0?(this.gameScreen.parentElement.style.backgroundColor="black",this.gameScreen.classList.add("shake"),o(this,n,W).call(this,{message:`
							<p class="loose">DEFEAT 💀</p>
							<p>Don't give up! You can do it.</p>
							<p>Wanna try again level ${this.currentLevelID}? 💪🏻</p>
						`,preset:"loose"})):o(this,n,W).call(this,{message:`
							<p class="win">VICTORY ✌🏻</p>
							<p>Good job! Was level ${this.currentLevelID} to easy?</p>
							<p> Now let's move on to the next level.</p	>
							<p>Can you handle even more asteroids? ☄</p>
						`,preset:"win"});return}o(this,n,de).call(this)},qe)},W=function({message:e,preset:t="loose"}){const i=this.state.modal.element,s=i.querySelector("p#modalMessage"),a=i.querySelector("#positive"),l=i.querySelector("#negative");s.innerHTML=e,t==="win"&&(s.classList.add("win"),a.innerHTML="Continue",l.innerHTML="Leave Game"),t==="loose"&&(s.classList.add("loose"),a.innerHTML="Try Again",l.innerHTML="Leave Game"),i.showModal(),a.blur()},ce=function(){J({spaceshipVelocity:this.spaceship.velocity,backgroundElement:backgroundImageSolid,decelerationFactor:.03}),J({spaceshipVelocity:this.spaceship.velocity,backgroundElement:backgroundImageTransparent,decelerationFactor:.02})},de=function(){o(this,n,ue).call(this),this.spaceship.hasHitTheEdge||this.frameAtObstacleHit?o(this,n,pe).call(this):this.spaceship.update(),o(this,n,ce).call(this),o(this,n,ge).call(this),o(this,n,ye).call(this);e:for(let e=this.projectiles.length-1;e>=0;e--){const t=this.projectiles[e];t:for(let i=this.asteroids.length-1;i>=0;i--){const s=this.asteroids[i];if(X(t.getCollisionShape(),s.getCollisionShape())){g(this,b).currentTime=0,this.state.sfxOn&&g(this,b).play(),this.player.score++,o(this,n,_).call(this),t.hasHitTarget=!0,s.isShot=!0,s.element.remove(),this.asteroids.splice(i,1);break t}}if(t.isOutside||t.hasHitTarget){t.element.remove(),this.projectiles.splice(e,1);continue e}t.update()}for(let e=this.asteroids.length-1;e>=0;e--){const t=this.asteroids[e],i=X(this.spaceship.getCollisionShape(),t.getCollisionShape());if(i&&(this.player.lives&&this.state.sfxOn&&g(this,M).play(),t.hasCollided=!0,this.player.lives--,o(this,n,j).call(this)),i&&!this.player.lives)break;if(t.hasEnteredScreen&&t.isOutside||t.hasCollided||t.isShot||i){t.element.remove(),this.asteroids.splice(e,1);continue}t.update()}},ue=function(){const e=this.remainingTime===0,t=this.player.lives===0;e&&!t&&(this.player.hasWon=!0),(e||t)&&(this.wasEnded=!0),this.currentFrame%O||console.log("🚀 ~ Game ~ #playerWinsOrLooses:",{timRemaining:this.remainingTime,timeIsUp:e,playerIsDead:t,playerHasWon:this.player.hasWon,gameWasEnded:this.wasEnded})},V=function(){clearInterval(this.gameloopIntervalID),this.gameloopIntervalID=null},pe=function(){this.frameAtObstacleHit||(this.frameAtObstacleHit=this.currentFrame),this.spaceship.hasHitTheEdge&&this.state.sfxOn&&this.gameScreen.clientWidth&&(g(this,A).volume=.5,g(this,A).play()),this.spaceship.deflectFromObstacle(),this.currentFrame-this.frameAtObstacleHit>=this.HIT_OBSTACLE_DURATION&&(this.frameAtObstacleHit=null)},me=function(e){for(let t=0;t<e;t++)o(this,n,$).call(this)},$=function(){let e={x:null,y:null};const t=50+Math.floor(Math.random()*150),i=["top","right","bottom","left"][Math.floor(Math.random()*4)];let s=null;const a=.3,l=a*Math.random()-a/2;let p=null;const y=1/1.1;switch(i){case"top":e.x=Math.floor(Math.random()*this.screenSize.width),e.y=0-t,p=(e.x/this.screenSize.width-.5)*y,s=(.5+l+p)*Math.PI;break;case"right":e.x=this.screenSize.width+100,e.y=Math.floor(Math.random()*this.screenSize.height),p=(e.y/this.screenSize.height-.5)*y,s=(1+l+p)*Math.PI;break;case"bottom":e.x=Math.floor(Math.random()*this.screenSize.width),e.y=this.screenSize.height,p=(e.x/this.screenSize.width-.5)*y,s=(1.5+l-p)*Math.PI;break;case"left":e.x=0-t,e.y=Math.floor(Math.random()*this.screenSize.height),p=(e.y/this.screenSize.height-.5)*y,s=(2+l-p)*Math.PI;break}const E=.2+Math.random()*this.baseAsteroidSpeed*this.currentLevel.speedMultiplier,S={x:E*Math.cos(s),y:E*Math.sin(s)},c=document.createElement("div");c.className="asteroid";const L=document.createElement("img");L.src=`${P()}assets/images/asteroid.png`,c.appendChild(L),this.gameScreen.appendChild(c);const x=new Re({position:e,velocity:S,width:t,element:c,gameScreen:this.gameScreen});this.asteroids.push(x)},ye=function(){this.currentFrame*O%this.currentLevel.spawnRate===0&&o(this,n,$).call(this)},ge=function(){const e=Date.now();if(this.keys.space.pressed&&e-this.lastFired>=this.fireRate){this.lastFired=e;const t=new Audio("assets/sounds/laser-gun-shot.mp3");this.state.sfxOn&&(t.volume=.3,t.play());const i=document.createElement("div");i.className="projectile",this.gameScreen.appendChild(i);const s=new De({gameScreen:this.gameScreen,position:{x:this.spaceship.position.x,y:this.spaceship.position.y},velocity:{x:8*this.spaceship.getCurrentVelocity().x,y:8*this.spaceship.getCurrentVelocity().y},projectileElement:i,orientation:this.spaceship.orientation,spaceshipElement:this.spaceship.element});this.projectiles.push(s)}},G=function(){this.currentFrame%O===0&&(this.remainingTime--,timeDisplay.textContent=this.getFormattedRemainingTime())},_=function(){scoreDisplay.textContent=this.player.score},j=function(){livesDisplay.textContent=this.player.lives},fe=function(){const e=document.createElement("div");e.id="spaceship";const t=document.createElement("img");return t.src=`${P()}assets/images/spaceship.png`,e.appendChild(t),this.gameScreen.appendChild(e),e};function X(r,e){const t=e.x-r.x,i=e.y-r.y;return Math.sqrt(t**2+i**2)<r.radius+e.radius}function J({spaceshipVelocity:r,backgroundElement:e,decelerationFactor:t}){const i=window.getComputedStyle(e),s=i.backgroundPosition.includes(", "),a=s?1:0,[l,p]=s?i.backgroundPosition.split(", ")[a].split(" "):i.backgroundPosition.split(" "),y=parseFloat(l)+r.x*t,E=parseFloat(p)+r.y*t;e.style.backgroundPosition=`${s?"50% 50%, ":""}${y}% ${E}%`}let u;document.addEventListener("DOMContentLoaded",()=>{var r={musicOn:!0,sfxOn:!0,musicLow:!1,modal:{element:null}};const e=document.querySelector("#musicControlPanel"),t=document.querySelector(".icon-button.music"),i=document.querySelector(".icon-button.sfx"),s=document.querySelector("#gameModal");s.querySelector("p#modalMessage");const a=s.querySelector("#positive"),l=s.querySelector("#negative");r.modal.element=s;const p=document.querySelector("#introOverlay"),y=document.querySelector("#introScreen"),E=document.querySelector("#skipIntroInstruction"),S=document.querySelector("#videoPlayer");S.muted=!0;const c=document.getElementById("musicPlayer"),L=document.querySelector("#musicPlayer source"),x=document.querySelector("#homeScreen"),Se=document.querySelector("#startButton"),ve=document.querySelector("#newGameButton");document.querySelector("#settingsButton"),document.querySelector("#exitButton");const k=document.querySelector("#gameScreen");document.querySelector("#backgroundImageSolid"),document.querySelector("#backgroundImageTransparent");const we=document.querySelector("#gameOverButton"),Ee=document.querySelector("#pauseButton");document.querySelector("#timeDisplay"),document.querySelector("#scoreDisplay"),document.querySelector("#livesDisplay");const T=document.querySelector("#resultScreen"),Le=document.querySelector("#toHomeButton"),xe=document.querySelector("#restartButton"),D=document.querySelector("#buttonHoverSoundPlayer"),ke=document.querySelectorAll("button:not(:disabled)"),Oe=document.querySelectorAll("audio.sfx"),N=new Audio("assets/sounds/sci-fi-click.wav");N.volume=.4,u=new Ce({gameScreen:k,state:r}),l.addEventListener("click",()=>{u.reset(),x.style.display="none",k.style.display="none",T.style.display="block",s.close()}),a.addEventListener("click",()=>{u.reset(),s.close(),u.start()}),y.addEventListener("click",be),y.addEventListener("keyup",Ae),Pe(),Se.addEventListener("click",R),ve.addEventListener("click",()=>{u.currentLevelID=1,R()}),Le.addEventListener("click",H),xe.addEventListener("click",R),ke.forEach(d=>{d.addEventListener("mouseenter",()=>{r.sfxOn&&(D.currentTime=0,D.play())}),d.addEventListener("click",()=>{r.sfxOn&&(D.currentTime=0,N.play())})}),t.addEventListener("click",d=>{r.musicOn=!r.musicOn,c.paused?c.play():c.pause(),d.target.blur()}),i.addEventListener("click",d=>{r.sfxOn=!r.sfxOn,Oe.forEach(z=>{z.pause(),z.currentTime=0}),d.target.blur()}),S.addEventListener("ended",()=>{console.log("The video has finished playing!"),H()});function be(){c.volume=.6,c.play().catch(d=>console.error("Playback error:",d)),S.src=`${P()}assets/videos/asteroids-migration.mp4`,S.playbackRate=.7,S.play(),p.classList.add("fade-out-overlay"),setTimeout(()=>{E.classList.add("show-skip-intro-instruction")},500),setTimeout(()=>{console.log("next Video"),S.src=`${P()}assets/videos/asteroid-approaching-earth.mp4`},8820)}function Ae(d){d.code==="Space"&&H()}function R(){Ie(),L.src.split("/").at(-1)!=="stardust-ambient.mp3"&&(L.src="assets/sounds/stardust-ambient.mp3",c.load()),r.musicLow=!1,c.volume=.3,r.musicOn&&c.play(),x.style.display="none",k.style.display="block",T.style.display="none"}function Te(){u.pauseOrResumeGame(),x.style.display="none",k.style.display="none",T.style.display="block"}function H(){c.volume=.3,L.src="assets/sounds/metropolis-of-the-future.mp3",c.load(),r.musicOn&&c.play(),x.style.display="flex",k.style.display="none",T.style.display="none",y.style.display="none",e.classList.add("show")}function Ie(){requestAnimationFrame(()=>{u&&u.reset()}),requestAnimationFrame(()=>{u.start()})}function Pe(){window.addEventListener("resize",u.resizeScreen),we.addEventListener("click",Te),Ee.addEventListener("click",d=>{u.pauseOrResumeGame(),u.toggleMusicVolume(c),d.target.blur()}),document.addEventListener("keydown",d=>u.onKeyDown(d)),document.addEventListener("keyup",d=>{u.onKeyUp(d,c)})}});
